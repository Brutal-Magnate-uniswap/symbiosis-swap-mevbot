#!/bin/bash
#
### BEGIN INIT INFO
# Provides:          bytemark-symbiosis
# Required-Start:    $syslog
# Required-Stop:     $syslog
# Should-Start:      sshd
# Should-Stop:       sshd
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Alerts the user that the system is using Bytemark Symbiosis.
# Description:       Alerts the user that the system is using Bytemark Symbiosis using fancy ascii art.
### END INIT INFO
#
# Author: Patrick J Cherry <patrick@bytemark.co.uk>
#

NAME="bytemark-symbiosis"
DESC="Bytemark Symbiosis"
PATH=/sbin:/usr/sbin:/bin:/usr/bin
SCRIPTNAME=/etc/init.d/$NAME

# Load the VERBOSE setting and other rcS variables
. /lib/init/vars.sh

# Define LSB log_* functions.
# Depend on lsb-base (>= 3.0-6) to ensure that this file is present.
. /lib/lsb/init-functions

# Allows us to use COLOURS!
if log_use_fancy_output; then
  B="$($TPUT bold)"
  L="$($TPUT setaf 4)"
  Y="$($TPUT setaf 3)"
  N="$($TPUT op)"
  U="$($TPUT sgr0)"
else
  B=''
  L=''
  Y=''
  N=''
  U=''
fi

case "$1" in
    'start')
       log_action_msg "System configured with $DESC."
       cat <<EOF
= = = = = = = = = = = = = = = = = = = = = = = = =${B}${L}
  _ _____   _______ ___ __  __   _   ___ _  __
 (_) _ ) \\ / /_   _| __|  \\/  | /_\\ | _ \\ |/ /
  _| _ \\\\ V /  | | | _|| |\\/| |/ _ \\|   / ' < 
 (_)${Y}___${L}/ |_|   |_| |_${Y}__${L}|_| ${Y}_${L}|_|_/ \\_\\_|_\\${Y}_${L}|\\_\\${Y}
   / __/__ __ __ _  / /   (_)___   ___  (_)___
  _\\ \\ / // //  ' \\/ _ \\ / // _ \\ (_-< / /(_-<
 /___/ \\_, //_/_/_/_.__//_/ \\___//___//_//___/
      /___/${N}

   For documentation please visit

     *  http://symbiosis.bytemark.co.uk/
${U}
= = = = = = = = = = = = = = = = = = = = = = = = =
EOF
       [ "$VERBOSE" != no ] && log_end_msg 0
       ;;

    'stop')
       log_action_msg "Thanks for using $DESC!"
       ;;

    'restart'|'reload'|'force-reload'|'status')
       log_action_msg "System configured with $DESC."
       ;;

    *)
       echo "Usage: $SCRIPTNAME start|stop|restart|reload|force-reload|status"
       exit 1
       ;;
esac

